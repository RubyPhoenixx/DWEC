<!DOCTYPE html>
<html>
    <head>
        <title>Ejercicio 9</title>
    </head>
    <style>
        td{
            border: 1px solid black;
        }
    </style>
    <script>

        String.prototype.fechaValida = function(){
            var fecha_partida = this.split('/');
            console.log(fecha_partida);
            if(fecha_partida.length!=3){
                console.error("FALLO: Formato incorrecto");
                return false;
            }else{
                console.log("OK: Formato correcto")
                if(isNaN(fecha_partida[0]) || isNaN(fecha_partida[1]) || isNaN(fecha_partida[2])){
                    console.error("FALLO: Todos los valores deben ser numericos");
                    return false;
                }else{
                    console.log("OK: Todos los valores son numericos");
                    if((fecha_partida[0]<1 || fecha_partida[0]>31)||(fecha_partida[1]<1 || fecha_partida[1]>12)||(fecha_partida[2]<1900 || fecha_partida[2]>2200)){
                        console.error("FALLO: Fecha incorrecta");
                    }else{
                        console.log("OK: Fecha correcta");
                        return true;
                    }
                }
            }
        }
    </script>
    <body>
        <script>
            input = prompt("Introduce una fecha (dd/mm/aaaa)");

            
            document.write(`<h3><u>VALIDANDO FECHAS</u></h3>`);

            if(input.fechaValida()){
                console.log("La función devolvió TRUE");

                fecha_partida = input.split('/');

                fecha_introducida = new Date(fecha_partida[2], fecha_partida[1]-1, fecha_partida[0]);
                fecha_menos4 = new Date(fecha_introducida - 4*(1000*3600*24*365));
                fecha_menos3 = new Date(fecha_introducida - 3*(1000*3600*24*365));
                fecha_menos2 = new Date(fecha_introducida - 2*(1000*3600*24*365));
                fecha_menos1 = new Date(fecha_introducida - 1*(1000*3600*24*365));

                diasSemana = ["Domingo", "Lunes", "Martes", "Miercoles", "Jueves", "Viernes", "Sábado", ];
                console.log(fecha_introducida);
                console.log(fecha_introducida.getDay());
                document.write(`
                Fecha introducida: ${fecha_introducida.getDate()}/${fecha_introducida.getMonth()}/${fecha_introducida.getFullYear()}
                <br>Ese mismo dia en...
                <table>
                    <tr>
                        <td>el año...</td>
                        <td>${fecha_menos4.getFullYear()}</td>
                        <td>${fecha_menos3.getFullYear()}</td>
                        <td>${fecha_menos2.getFullYear()}</td>
                        <td>${fecha_menos1.getFullYear()}</td>
                        <td>${fecha_introducida.getFullYear()}</td>
                    </tr>
                    <tr>
                        <td>era un...</td>
                        <td>${diasSemana[fecha_menos4.getDay()]}</td>
                        <td>${diasSemana[fecha_menos3.getDay()]}</td>
                        <td>${diasSemana[fecha_menos2.getDay()]}</td>
                        <td>${diasSemana[fecha_menos1.getDay()]}</td>
                        <td>${diasSemana[fecha_introducida.getDay()]}</td>
                    </tr>
                </table>
                
                
                
                `);

                
            }else{
                console.log("La función devolvió FALSE");
            }

        </script>
        
    </body>
</html>